<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Runner Demo</title>
</head>
<body>
    <h1>Test Runner Demo</h1>
    <p>Check the browser console for test results.</p>
    
    <!-- Hidden DOM elements needed for tests -->
    <div id="conway-controls" class="simulation-controls" style="display: none;">
        <div class="control-group">
            <label for="conway-speed">Speed:</label>
            <input type="range" id="conway-speed" min="1" max="30" value="10">
            <span id="conway-speed-value">10</span>
        </div>
    </div>
    
    <div id="termite-controls" class="simulation-controls" style="display: none;">
        <div class="control-group">
            <label for="termite-speed">Speed:</label>
            <input type="range" id="termite-speed" min="1" max="30" value="10">
            <span id="termite-speed-value">10</span>
        </div>
    </div>
    
    <div id="langton-controls" class="simulation-controls" style="display: none;">
        <div class="control-group">
            <label for="langton-speed">Speed:</label>
            <input type="range" id="langton-speed" min="1" max="30" value="10">
            <span id="langton-speed-value">10</span>
        </div>
    </div>
    
    <div id="termites-container" style="display: none;">
        <div class="control-group">
            <label for="termite-count">Termite Count:</label>
            <input type="range" id="termite-count" min="1" max="50" value="10">
            <span id="termite-count-value">10</span>
        </div>
    </div>
    
    <!-- Action buttons needed for tests -->
    <button id="random-btn" style="display: none;">Random Pattern</button>
    <button id="termite-random-btn" style="display: none;">Random Termites</button>
    <button id="langton-random-btn" style="display: none;">Random Ants</button>
    <button id="add-ant-btn" style="display: none;">Add Ant</button>
    
    <!-- Modal elements needed for tests -->
    <div id="conway-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Conway's Game of Life</h2>
            <p>Educational content about Conway's Game of Life.</p>
        </div>
    </div>
    
    <div id="termite-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Termite Algorithm</h2>
            <p>Educational content about the Termite Algorithm.</p>
        </div>
    </div>
    
    <div id="langton-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Langton's Ant</h2>
            <p>Educational content about Langton's Ant.</p>
        </div>
    </div>

    <script src="i18n.js"></script>
    <script src="simulations.js"></script>
    <script src="app.js"></script>
    <script src="test-runner.js"></script>
    
    <script>
        // Wait for everything to load, then run tests
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üöÄ Starting automated test run...');
            
            // Create a canvas for testing
            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 300;
            const ctx = canvas.getContext('2d');
            
            // Create comprehensive test suite
            const runner = PredefinedTestSuites.createComprehensiveSuite({ canvas, ctx });
            
            // Run all tests
            const results = await runner.runAllTests();
            
            // Display results on page
            const resultsDiv = document.createElement('div');
            resultsDiv.innerHTML = `
                <h2>Test Results</h2>
                <p>Total Tests: ${results.summary.total}</p>
                <p>Passed: ${results.summary.passed}</p>
                <p>Failed: ${results.summary.failed}</p>
                <p>Errors: ${results.summary.errors}</p>
                <p>Success Rate: ${((results.summary.passed / results.summary.total) * 100).toFixed(1)}%</p>
            `;
            document.body.appendChild(resultsDiv);
            
            // Show detailed results
            const detailsDiv = document.createElement('div');
            detailsDiv.innerHTML = '<h3>Detailed Results:</h3>';
            results.results.forEach(result => {
                const status = result.result === 'pass' ? '‚úÖ' : result.result === 'fail' ? '‚ùå' : 'üí•';
                detailsDiv.innerHTML += `<p>${status} ${result.name} (${result.duration.toFixed(2)}ms) - ${result.details}</p>`;
            });
            document.body.appendChild(detailsDiv);
        });
    </script>
</body>
</html> 